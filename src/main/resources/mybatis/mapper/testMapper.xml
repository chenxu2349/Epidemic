<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.epidemic.mapper.testMapper">

    <resultMap id="PatientMap" type="com.example.epidemic.pojo.patient">
        <result column="patient_id" property="patientId"></result>
        <result column="epidemic_id" property="epidemicId"></result>
        <result column="area_code" property="areaCode"></result>
        <result column="patient_name" property="patientName"></result>
        <result column="patient_address" property="patientAddress"></result>
        <result column="patient_tel" property="patientTel"></result>
        <result column="patient_symptom" property="patientSymptom"></result>
        <result column="patient_age" property="patientAge"></result>
        <result column="patient_sex" property="patientSex"></result>
        <result column="heart_rate" property="heartRate"></result>
        <result column="blood_pressure" property="bloodPressure"></result>
        <result column="blood_glucose" property="bloodGlucose"></result>
        <result column="blood_fat" property="bloodFat"></result>
        <result column="body_temperature" property="bodyTemperature"></result>
        <result column="hemoglobin" property="hemoglobin"></result>
        <result column="vital_capacity" property="vitalCapacity"></result>
        <result column="batch" property="batch"></result>
    </resultMap>

    <resultMap id="ContactMap" type="com.example.epidemic.pojo.contact">
        <result column="contact_id" property="contactId"></result>
        <result column="contact_name" property="contactName"></result>
        <result column="patient_id" property="patientId"></result>
        <result column="area_code" property="areaCode"></result>
        <result column="contact_age" property="contactAge"></result>
        <result column="contact_sex" property="contactSex"></result>
        <result column="contact_tel" property="contactTel"></result>
        <result column="contact_address" property="contactAddress"></result>
        <result column="contact_of_vaccinations" property="contactOfVaccinations"></result>
        <result column="contact_history_of_illness" property="contactHistoryOfIllness"></result>
        <result column="potential_patient_probability" property="potentialPatientProbability"></result>
        <result column="potential_patient" property="potentialP atient"></result>
        <result column="heart_rate" property="heartRate"></result>
        <result column="blood_pressure" property="bloodPressure"></result>
        <result column="blood_glucose" property="bloodGlucose"></result>
        <result column="blood_fat" property="bloodFat"></result>
        <result column="body_temperature" property="bodyTemperature"></result>
        <result column="hemoglobin" property="hemoglobin"></result>
        <result column="vital_capacity" property="vitalCapacity"></result>
        <result column="batch" property="batch"></result>
    </resultMap>

    <select id="queryById" resultMap="PatientMap">
        select * from patients_info
        where patient_id = #{id}
    </select>

    <select id="queryPatientsByDate" resultMap="PatientMap">
        select * from patients_info as pi, patients_track_info as pti
        where
            DATE_FORMAT(pti.end_time,'%Y-%m-%d') >= DATE_FORMAT(#{date},'%Y-%m-%d')
            and DATE_FORMAT(pti.start_time,'%Y-%m-%d') &lt;= DATE_FORMAT(#{date},'%Y-%m-%d')
            and pi.patient_id = pti.patient_id
    </select>

    <select id="queryContacts" resultMap=""></select>

</mapper>
